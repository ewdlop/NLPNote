# åœ°æ—¥æœˆæ›†(ä¸‰é«”) - Three-Body Calendar System

## æ¦‚è¿° Overview

åœ°æ—¥æœˆæ›†ï¼ˆä¸‰é«”ï¼‰æ˜¯ä¸€å€‹è€ƒæ…®åœ°çƒã€å¤ªé™½å’Œæœˆçƒä¸‰é«”å¼•åŠ›ç›¸äº’ä½œç”¨çš„æ›†æ³•ç³»çµ±ï¼Œå…·å‚™è‡ªç„¶èªè¨€è™•ç†èƒ½åŠ›ï¼Œæ”¯æŒå¤šèªè¨€æ—¥æœŸè§£æå’Œæ ¼å¼åŒ–ã€‚

The Three-Body Calendar is a calendar system that accounts for the gravitational interactions between Earth, Sun, and Moon, with natural language processing capabilities supporting multilingual date parsing and formatting.

## ç‰¹æ€§ Features

### ğŸŒ å¤©æ–‡è¨ˆç®— Astronomical Calculations
- **ç²¾ç¢ºçš„å¤©é«”ä½ç½®è¨ˆç®—** - Precise celestial body position calculations
- **æœˆç›¸è¨ˆç®—** - Lunar phase calculations  
- **ç¯€æ°£è¨ˆç®—** - Solar term calculations (Chinese 24 solar terms)
- **å„’ç•¥æ—¥è½‰æ›** - Julian Day conversions

### ğŸ—£ï¸ è‡ªç„¶èªè¨€è™•ç† Natural Language Processing
- **å¤šèªè¨€æ”¯æŒ** - Multilingual support (Chinese & English)
- **æ—¥æœŸè¡¨é”å¼è§£æ** - Date expression parsing
- **æ™ºèƒ½æ–‡æœ¬åˆ†æ** - Intelligent text analysis
- **èªå¢ƒç†è§£** - Context understanding

### ğŸ”— ç³»çµ±æ•´åˆ System Integration
- **èˆ‡ç¾æœ‰NLPå·¥å…·æ•´åˆ** - Integration with existing NLP tools
- **æ¨¡çµ„åŒ–è¨­è¨ˆ** - Modular design
- **æ“´å±•æ€§** - Extensibility

## æ ¸å¿ƒçµ„ä»¶ Core Components

### 1. ThreeBodyCalendar ä¸‰é«”æ›†æ³•æ ¸å¿ƒé¡

```python
from ThreeBodyCalendar import ThreeBodyCalendar
import datetime

calendar = ThreeBodyCalendar()

# ç²å–ç•¶å‰ä¸‰é«”ç‹€æ…‹
now = datetime.datetime.now()
state = calendar.get_three_body_state(now)

# æ ¼å¼åŒ–ä¸‰é«”æ—¥æœŸ
formatted_zh = calendar.format_three_body_date(now, 'zh')
formatted_en = calendar.format_three_body_date(now, 'en')
```

### 2. AstronomicalCalculator å¤©æ–‡è¨ˆç®—å™¨

è² è²¬ç²¾ç¢ºçš„å¤©é«”åŠ›å­¸è¨ˆç®—ï¼š
- å¤ªé™½ä½ç½®è¨ˆç®—
- æœˆçƒä½ç½®è¨ˆç®—  
- åœ°çƒä½ç½®è¨ˆç®—
- å„’ç•¥æ—¥è½‰æ›

### 3. ThreeBodyDateParser è‡ªç„¶èªè¨€è§£æå™¨

```python
from ThreeBodyCalendar import ThreeBodyDateParser

parser = ThreeBodyDateParser()

# è§£æä¸­æ–‡æ—¥æœŸ
result = parser.analyze_date_expression("2024å¹´12æœˆ22æ—¥")

# è§£æè‹±æ–‡æ—¥æœŸ
result = parser.analyze_date_expression("2025-01-01")
```

## ä½¿ç”¨ç¤ºä¾‹ Usage Examples

### åŸºæœ¬ä½¿ç”¨ Basic Usage

```python
#!/usr/bin/env python3
from ThreeBodyCalendar import ThreeBodyCalendar, ThreeBodyDateParser
import datetime

# å‰µå»ºæ›†æ³•ç³»çµ±
calendar = ThreeBodyCalendar()
parser = ThreeBodyDateParser()

# ç²å–ç•¶å‰ä¸‰é«”ç‹€æ…‹
now = datetime.datetime.now()
print("ç•¶å‰ä¸‰é«”ç‹€æ…‹:")
print(calendar.format_three_body_date(now, 'zh'))

# è¨ˆç®—æœˆç›¸
phase_zh, phase_en, ratio = calendar.lunar_phase(now)
print(f"æœˆç›¸: {phase_zh} ({ratio:.1%})")

# è¨ˆç®—ç¯€æ°£
term_zh, term_en = calendar.solar_term(now)
print(f"ç¯€æ°£: {term_zh}")
```

### è‡ªç„¶èªè¨€è§£æ Natural Language Parsing

```python
# ä¸­æ–‡æ—¥æœŸè§£æ
expressions = [
    "2024å¹´12æœˆ22æ—¥",
    "2025å¹´æ˜¥åˆ†", 
    "æ˜å¹´å†¬è‡³",
    "ä¸‹å€‹æ»¿æœˆ"
]

for expr in expressions:
    result = parser.analyze_date_expression(expr)
    if result['parsed_date']:
        print(f"è¼¸å…¥: {expr}")
        print(f"è§£æ: {result['parsed_date']}")
        print(f"ä¸‰é«”æ ¼å¼: {result['three_body_format_zh']}")
        print()
```

### èˆ‡ç¾æœ‰NLPå·¥å…·æ•´åˆ Integration with Existing NLP Tools

```python
from SubtextAnalyzer import SubtextAnalyzer
from ThreeBodyCalendar import ThreeBodyCalendar

# æ•´åˆåˆ†æ
def analyze_temporal_expression(text):
    """åˆ†ææ™‚é–“è¡¨é”å¼çš„æ½›æ–‡æœ¬"""
    subtext_analyzer = SubtextAnalyzer()
    calendar = ThreeBodyCalendar()
    
    # æ½›æ–‡æœ¬åˆ†æ
    subtext_result = subtext_analyzer.analyze(text)
    
    # ä¸‰é«”æ›†æ³•åˆ†æ
    parser = ThreeBodyDateParser()
    temporal_result = parser.analyze_date_expression(text)
    
    return {
        'subtext_analysis': subtext_result,
        'temporal_analysis': temporal_result,
        'integrated_interpretation': combine_analyses(subtext_result, temporal_result)
    }
```

## å¤©æ–‡å­¸èƒŒæ™¯ Astronomical Background

### ä¸‰é«”å•é¡Œ Three-Body Problem

ä¸‰é«”å•é¡Œæ˜¯å¤©é«”åŠ›å­¸ä¸­çš„ç¶“å…¸å•é¡Œï¼Œç ”ç©¶ä¸‰å€‹å¤©é«”åœ¨ç›¸äº’å¼•åŠ›ä½œç”¨ä¸‹çš„é‹å‹•ã€‚åœ¨åœ°æ—¥æœˆç³»çµ±ä¸­ï¼š

- **åœ°çƒ** - ä¸»è¦åƒè€ƒæ¡†æ¶
- **å¤ªé™½** - ä¸»è¦å¼•åŠ›æºï¼Œæ±ºå®šå­£ç¯€è®ŠåŒ–
- **æœˆçƒ** - å½±éŸ¿æ½®æ±å’Œæœˆç›¸è®ŠåŒ–

The three-body problem is a classic problem in celestial mechanics studying the motion of three celestial bodies under mutual gravitational influence.

### æ›†æ³•æ„ç¾© Calendar Significance

å‚³çµ±æ›†æ³•é€šå¸¸åªè€ƒæ…®å¤ªé™½ï¼ˆé™½æ›†ï¼‰æˆ–æœˆçƒï¼ˆé™°æ›†ï¼‰çš„é‹å‹•ã€‚ä¸‰é«”æ›†æ³•åŒæ™‚è€ƒæ…®ï¼š

1. **å¤ªé™½é‹å‹•** - æ±ºå®šç¯€æ°£å’Œå­£ç¯€
2. **æœˆçƒé‹å‹•** - æ±ºå®šæœˆç›¸å’Œé™°æ›†æœˆ
3. **åœ°çƒé‹å‹•** - åƒè€ƒæ¡†æ¶å’Œæ—¥å¤œå¾ªç’°
4. **ä¸‰é«”ç›¸äº’ä½œç”¨** - å¾®å¦™çš„å¼•åŠ›æ”å‹•

## æŠ€è¡“å¯¦ç¾ Technical Implementation

### ç®—æ³•ç‰¹é» Algorithm Features

1. **ç°¡åŒ–çš„ä¸‰é«”åŠ›å­¸æ¨¡å‹** - Simplified three-body mechanics
2. **é«˜ç²¾åº¦å¤©é«”ä½ç½®è¨ˆç®—** - High-precision celestial position calculation
3. **å„ªåŒ–çš„è¨ˆç®—æ€§èƒ½** - Optimized computational performance
4. **éŒ¯èª¤è™•ç†å’Œé™ç´š** - Error handling and graceful degradation

### æ•¸æ“šçµæ§‹ Data Structures

```python
@dataclass
class CelestialPosition:
    longitude: float  # ç¶“åº¦ (degrees)
    latitude: float   # ç·¯åº¦ (degrees) 
    distance: float   # è·é›¢ (astronomical units)

@dataclass  
class ThreeBodyState:
    earth: CelestialPosition
    sun: CelestialPosition
    moon: CelestialPosition
    julian_day: float
    gregorian_date: datetime.datetime
```

### è¨ˆç®—å…¬å¼ Calculation Formulas

#### å„’ç•¥æ—¥è¨ˆç®— Julian Day Calculation
```
JD = 367 Ã— Y - INT(7 Ã— (Y + INT((M + 9) / 12)) / 4) + INT(275 Ã— M / 9) + D + 1721013.5
```

#### å¤ªé™½ä½ç½® Solar Position
åŸºæ–¼é–‹æ™®å‹’è»Œé“è¦ç´ çš„ç°¡åŒ–è¨ˆç®—ï¼š
- å¹³è¿‘é»è§’ Mean Anomaly
- åå¿ƒç‡æ–¹ç¨‹ Equation of Center  
- é»ƒé“ç¶“åº¦ Ecliptic Longitude

#### æœˆçƒä½ç½® Lunar Position
è€ƒæ…®ä¸»è¦æ”å‹•é …çš„æœˆçƒä½ç½®è¨ˆç®—ï¼š
- ä¸»è¦ä¸ç­‰å¼ Principal inequality
- å‡ºå·® Evection
- å¹´å·® Annual equation

## API åƒè€ƒ API Reference

### ThreeBodyCalendar

#### Methods

- `get_three_body_state(dt: datetime) -> ThreeBodyState`
  - ç²å–æŒ‡å®šæ™‚é–“çš„ä¸‰é«”ç³»çµ±ç‹€æ…‹
  
- `lunar_phase(dt: datetime) -> Tuple[str, str, float]`
  - è¨ˆç®—æœˆç›¸ï¼Œè¿”å›ä¸­è‹±æ–‡åç¨±å’Œç›¸ä½æ¯”ä¾‹
  
- `solar_term(dt: datetime) -> Tuple[str, str]`
  - è¨ˆç®—ç¯€æ°£ï¼Œè¿”å›ä¸­è‹±æ–‡åç¨±
  
- `format_three_body_date(dt: datetime, lang: str) -> str`
  - æ ¼å¼åŒ–ä¸‰é«”æ—¥æœŸå­—ç¬¦ä¸²

### ThreeBodyDateParser

#### Methods

- `parse_date(text: str) -> Optional[datetime]`
  - å¾æ–‡æœ¬è§£ææ—¥æœŸ
  
- `analyze_date_expression(text: str) -> Dict`
  - åˆ†ææ—¥æœŸè¡¨é”å¼ï¼Œè¿”å›å®Œæ•´åˆ†æçµæœ

## æ‡‰ç”¨å ´æ™¯ Application Scenarios

### 1. æ•™è‚²æ‡‰ç”¨ Educational Applications
- **å¤©æ–‡å­¸æ•™å­¸** - Astronomy education
- **æ›†æ³•æ­·å²ç ”ç©¶** - Calendar history research
- **æ–‡åŒ–äº¤æµ** - Cultural exchange

### 2. æ–‡å­¸å‰µä½œ Literary Creation  
- **ç§‘å¹»å°èªªè¨­å®š** - Science fiction world-building
- **è©©æ­Œå‰µä½œ** - Poetry with astronomical themes
- **å‚³çµ±æ–‡åŒ–é‡ç¾** - Traditional culture recreation

### 3. å­¸è¡“ç ”ç©¶ Academic Research
- **è¨ˆç®—èªè¨€å­¸** - Computational linguistics
- **å¤©é«”åŠ›å­¸** - Celestial mechanics
- **æ–‡åŒ–äººé¡å­¸** - Cultural anthropology

### 4. æŠ€è¡“æ‡‰ç”¨ Technical Applications
- **æ™ºèƒ½æ—¥æ›†ç³»çµ±** - Intelligent calendar systems
- **å¤©æ–‡è»Ÿé«”** - Astronomical software
- **å¤šèªè¨€è™•ç†** - Multilingual processing

## å±€é™æ€§èˆ‡æ”¹é€² Limitations and Improvements

### ç•¶å‰å±€é™ Current Limitations

1. **ç°¡åŒ–çš„ç‰©ç†æ¨¡å‹** - Simplified physical model
2. **æœ‰é™çš„èªè¨€æ”¯æŒ** - Limited language support
3. **åŸºç¤çš„NLPåŠŸèƒ½** - Basic NLP capabilities
4. **è¨ˆç®—ç²¾åº¦é™åˆ¶** - Computational precision limits

### æœªä¾†æ”¹é€² Future Improvements

1. **æ›´ç²¾ç¢ºçš„è»Œé“æ¨¡å‹** - More precise orbital models
2. **æ·±åº¦å­¸ç¿’NLP** - Deep learning NLP
3. **æ›´å¤šèªè¨€æ”¯æŒ** - Extended language support
4. **å¯¦æ™‚å¤©æ–‡æ•¸æ“š** - Real-time astronomical data
5. **å¯è¦–åŒ–ç•Œé¢** - Visualization interface

## é–‹ç™¼åœ˜éšŠ Development Team

- **ä¸‰é«”æ›†æ³•é–‹ç™¼çµ„** - Three-Body Calendar Development Team
- **é …ç›®æ—¥æœŸ** - Project Date: 2024-12-22
- **ç‰ˆæœ¬** - Version: 1.0.0

## ç›¸é—œè³‡æº Related Resources

### å­¸è¡“åƒè€ƒ Academic References
- Jean Meeus, "Astronomical Algorithms"
- ä¸­åœ‹ç§‘å­¸é™¢ç´«é‡‘å±±å¤©æ–‡å°ï¼Œã€Šä¸­åœ‹å¤©æ–‡å¹´æ›†ã€‹
- IAU Recommendations on Astronomical Constants

### è»Ÿé«”å·¥å…· Software Tools
- PyEphem - Astronomical calculations
- Astropy - Professional astronomy library
- NLTK/spaCy - Natural language processing

### æ–‡åŒ–èƒŒæ™¯ Cultural Background
- ä¸­åœ‹å‚³çµ±æ›†æ³• - Traditional Chinese Calendar
- äºŒåå››ç¯€æ°£ - 24 Solar Terms
- æœˆç›¸æ–‡åŒ– - Lunar phase culture

---

*æ­¤æ–‡æª”æ˜¯ä¸‰é«”æ›†æ³•ç³»çµ±çš„å®Œæ•´æŠ€è¡“å’Œä½¿ç”¨æŒ‡å—ã€‚å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚*

*This document is a complete technical and usage guide for the Three-Body Calendar System. For questions or suggestions, please contact the development team.*